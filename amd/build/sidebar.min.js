/**
 * Javascript fast navigation interactive sidebar
 *
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 *
 * @copyright 17/07/2020 Mfreak.nl | LdesignMedia.nl - Luuk Verhoeven
 * @author    Luuk Verhoeven
 **/
define("block_fastnav/sidebar",["jquery","core/ajax","core/log","core/notification","core/templates","core/config","core_user/repository"],(function($,Ajax,Log,Notification,Templates,setUserPreference,UserRepository){var sidebar={options:{open:!1,instanceid:0},setOptions:function(options){var key,vartype;for(key in this.options)this.options.hasOwnProperty(key)&&options.hasOwnProperty(key)&&(vartype=typeof this.options[key],this.options[key]="boolean"===vartype?Boolean(options[key]):"number"===vartype?Number(options[key]):"string"===vartype?String(options[key]):options[key])},start:function(){Log.debug("block_fastnav/sidebar: start()"),Log.debug(this.options),this.loadNavigation()},loadNavigation:function(){Ajax.call([{methodname:"block_fastnav_get_items",args:{instanceid:this.options.instanceid}}])[0].done((function(response){0!==response.items.length?Templates.render("block_fastnav/block_item_list",response).done((function(html){$("body").prepend('<nav class="block-fastnav-sidebar">'+html+"</nav>"),sidebar.loadEvents()})).fail(Notification.exception):Log.debug("block_fastnav/sidebar: no items.")})).fail(Notification.exception)},openOrClose:function(){var $sidebar=$(".block-fastnav-sidebar");80===$sidebar.width()?$sidebar.animate({width:0},300,(function(){Log.debug("block_fastnav/sidebar: Animation complete."),$sidebar.find(".fa-arrow-right").addClass("fa-arrow-left").removeClass("fa-arrow-right")})):$sidebar.animate({width:"80px"},300,(function(){Log.debug("block_fastnav/sidebar: Animation complete."),$sidebar.find(".fa-arrow-left").removeClass("fa-arrow-left").addClass("fa-arrow-right")}))},loadEvents:function(){Log.debug("block_fastnav/sidebar: loadEvents()"),$(".block-fastnav-lock.active").length&&sidebar.openOrClose(),$("body").on("mouseover",".block-fastnav-opener",(function(){sidebar.openOrClose()})),$("body").on("click",".block-fastnav-lock",(function(event){var $el=$(event.currentTarget),locked=$el.hasClass("active");if(Log.debug("block_fastnav/sidebar: locked ",locked),locked)return $el.removeClass("active"),sidebar.updateOpenPreference("0"),void sidebar.openOrClose();$el.addClass("active"),sidebar.updateOpenPreference("1")}));try{$(".block-fastnav-sidebar a").tooltip()}catch(e){Log.debug("block_fastnav/sidebar: bootstrap tooltip not available ")}},updateOpenPreference:function(status){return UserRepository.setUserPreference("block_fastnav_open",status).catch(Notification.exception)}};return{init:function(params){sidebar.setOptions(params),sidebar.start()}}}));

//# sourceMappingURL=sidebar.min.js.map