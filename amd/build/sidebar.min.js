define(["jquery","core/ajax","core/log","core/notification","core/templates","core/config"],function(a,b,c,d,e){"use strict";var f={options:{open:!1,instanceid:0},setOptions:function(a){var b,c;for(b in this.options)this.options.hasOwnProperty(b)&&a.hasOwnProperty(b)&&(c=typeof this.options[b],"boolean"===c?this.options[b]=Boolean(a[b]):"number"===c?this.options[b]=Number(a[b]):"string"===c?this.options[b]=String(a[b]):this.options[b]=a[b])},start:function(){c.debug("block_fastnav/sidebar: start()"),c.debug(this.options),this.loadNavigation()},loadNavigation:function(){var c=b.call([{methodname:"block_fastnav_get_items",args:{instanceid:this.options.instanceid}}]);c[0].done(function(b){e.render("block_fastnav/block_item_list",b).done(function(b){a("body").prepend('<nav class="block-fastnav-sidebar">'+b+"</nav>"),f.loadEvents()}).fail(d.exception)}).fail(d.exception)},loadEvents:function(){c.debug("block_fastnav/sidebar: loadEvents()");var b=a(".block-fastnav-sidebar");a("body").on("click",".block-fastnav-opener",function(){return 100==b.width()?void b.animate({width:0},500,function(){c.debug("block_fastnav/sidebar: Animation complete."),b.find(".fa").addClass("fa-arrow-left").removeClass("fa-arrow-right")}):void b.animate({width:"100px"},500,function(){c.debug("block_fastnav/sidebar: Animation complete."),b.find(".fa").removeClass("fa-arrow-left").addClass("fa-arrow-right")})})},updateOpenPreference:function(a){var c=b.call([{methodname:"core_user_update_user_preferences",args:{preferences:[{type:"block_fastnav_open",value:a}]}}]);c[0].done(function(){}).fail(d.exception)}};return{init:function(a){f.setOptions(a),f.start()}}});